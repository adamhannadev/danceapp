<% content_for :title, @routine.title %>

<div class="container-fluid">
  <div class="row">
    <div class="col-12">
      <div class="d-flex justify-content-between align-items-center mb-4">
        <h1 class="h2 text-primary">
          <i class="fas fa-list-alt me-2"></i><%= @routine.title %>
        </h1>
        
        <div>
          <%= link_to routines_path, class: "btn btn-outline-secondary me-2" do %>
            <i class="fas fa-arrow-left me-1"></i>Back to Routines
          <% end %>
          
          <% if current_user.instructor? || current_user.admin? %>
            <%= link_to edit_routine_path(@routine), class: "btn btn-warning me-2" do %>
              <i class="fas fa-edit me-1"></i>Edit
            <% end %>
            
            <%= link_to @routine, method: :delete, class: "btn btn-danger",
                  data: { 
                    confirm: "Are you sure you want to delete this routine?",
                    turbo_method: :delete
                  } do %>
              <i class="fas fa-trash me-1"></i>Delete
            <% end %>
          <% end %>
        </div>
      </div>

      <div class="row">
        <div class="col-lg-8">
          <div class="card">
            <div class="card-header">
              <h5 class="card-title mb-0">
                <i class="fas fa-file-text me-2"></i>Routine Description
              </h5>
            </div>
            <div class="card-body">
              <div class="mb-4">
                <%= simple_format(@routine.description) %>
              </div>
            </div>
          </div>
        </div>
        
        <div class="col-lg-4">
          <div class="card">
            <div class="card-header">
              <h5 class="card-title mb-0">
                <i class="fas fa-info-circle me-2"></i>Routine Details
              </h5>
            </div>
            <div class="card-body">
              <div class="mb-3">
                <label class="form-label fw-bold text-muted">Dance Category</label>
                <div>
                  <span class="badge bg-primary fs-6">
                    <%= @routine.dance_category.name %>
                  </span>
                </div>
              </div>
              
              <div class="mb-3">
                <label class="form-label fw-bold text-muted">Dance Style</label>
                <div>
                  <span class="badge bg-secondary fs-6">
                    <%= @routine.dance_style.name %>
                  </span>
                </div>
              </div>
              
              <div class="mb-3">
                <label class="form-label fw-bold text-muted">Assigned to Student</label>
                <div class="d-flex align-items-center">
                  <div class="avatar-circle bg-primary text-white me-2">
                    <%= @routine.user.first_name.first.upcase %>
                  </div>
                  <div>
                    <%= link_to @routine.user.full_name, user_path(@routine.user), 
                          class: "text-decoration-none" %>
                    <br>
                    <small class="text-muted">
                      <%= @routine.user.role.humanize %>
                    </small>
                  </div>
                </div>
              </div>
              
              <div class="mb-3">
                <label class="form-label fw-bold text-muted">Created By</label>
                <div class="d-flex align-items-center">
                  <div class="avatar-circle bg-gold text-white me-2">
                    <%= @routine.created_by.first_name.first.upcase %>
                  </div>
                  <div>
                    <%= link_to @routine.created_by.full_name, user_path(@routine.created_by), 
                          class: "text-decoration-none" %>
                    <br>
                    <small class="text-muted">
                      <%= @routine.created_by.role.humanize %>
                    </small>
                  </div>
                </div>
              </div>
              
              <div class="mb-3">
                <label class="form-label fw-bold text-muted">Created</label>
                <div>
                  <%= @routine.created_at.strftime("%B %d, %Y") %>
                  <br>
                  <small class="text-muted">
                    <%= time_ago_in_words(@routine.created_at) %> ago
                  </small>
                </div>
              </div>
              
              <% if @routine.updated_at != @routine.created_at %>
                <div class="mb-3">
                  <label class="form-label fw-bold text-muted">Last Updated</label>
                  <div>
                    <%= @routine.updated_at.strftime("%B %d, %Y") %>
                    <br>
                    <small class="text-muted">
                      <%= time_ago_in_words(@routine.updated_at) %> ago
                    </small>
                  </div>
                </div>
              <% end %>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
